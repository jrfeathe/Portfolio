# Resume Publishing Workflow

Task [9.1 â€” Resume JSON & PDF Downloads](../../WBS/Task_9.1_Resume_JSON_and_PDF.md) produces two public artifacts backed by `content/resume.json`:

- `GET /resume.json` returns the sanitized, public-safe resume dataset generated by `getPublicResume()`.
- `/resume.pdf` serves a manually curated PDF (and any localized variants) exported from the latest print-ready source.

## Generating assets

- Run `pnpm --filter @portfolio/site build` to regenerate app assets and confirm `/resume.json` is current. The build step no longer generates PDFs automatically.
- Produce the PDF(s) manually from your source of truth (e.g., design file, word processor, or dedicated print layout):
  1. Export `resume.pdf` (EN) and optional localized variants (`resume-ja.pdf`, `resume-zh.pdf`, etc.).
  2. Drop the files into `apps/site/public/`. Keep `resume.pdf` as the canonical default that CTA links reference.
  3. Update filenames if the version changes and document the change in `CHANGELOG.md` / WBS notes.
- When replacing files, ensure Git registers the binary change (use `git status` to confirm) before committing.

## Validating downloads

- Unit tests cover the sanitizer (`apps/site/src/lib/resume/__tests__/public.test.ts`) and the route handler (`apps/site/src/__tests__/resume-json-route.test.ts`).
- Playwright spec `apps/site/tests/downloads.spec.ts` asserts the JSON payload is placeholder-free and the PDF payload is non-zero and <250 KB.
- Manual check: open `http://localhost:3000/resume/print` to confirm the layout still matches the exported PDF; download `/resume.pdf` and verify metadata/version information before publishing.

## Contract overview

- JSON shape lives in `apps/site/src/lib/resume/public.ts`. Add new public fields there and re-export through `getPublicResume()`. Avoid leaking `PLACEHOLDER` values or fields not meant for recruiters.
- The print route uses the same helper to render sections (summary, strengths, experience, projects, skills, education, domains, eligibility, availability). Styling relies on `app/globals.css` and `src/styles/print.css`; match that output when exporting PDFs.

## Related references

- Structured data builders reuse `getResumeProfile()` which depends on the same sanitized contract. See `docs/seo/structured-data.md`.
- Future CLI exports (Task 18.1) should also consume `getPublicResume()` to avoid duplicating transformation logic.
